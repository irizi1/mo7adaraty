<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">
    <title>إدارة المحاضرات</title>
    
    <link rel="stylesheet" href="../../assets/css/admin_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        .table-section table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .table-section th, .table-section td { padding: 12px 15px; text-align: right; border-bottom: 1px solid #ddd; }
        .table-section th { background-color: #f8f9fa; font-weight: bold; }
        .table-section tr:hover { background-color: #f1f1f1; }
        .action-btn { padding: 6px 10px; margin-left: 5px; border: none; cursor: pointer; border-radius: 4px; color: white; text-decoration: none; display: inline-block; }
        .btn-delete { background-color: #dc3545; }
        /* عنوان الشعبة كما كان في كود PHP */
        .division-title { margin-top: 30px; border-bottom: 2px solid #007bff; padding-bottom: 5px; font-size: 1.5em; }
        .form-section h3 { margin-bottom: 20px; }
        .filter-form { display: flex; gap: 20px; margin-bottom: 20px; }
        .form-group { flex-grow: 1; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div id="sidebar-container"></div>
        
        <main class="admin-main-content">
            <div id="header-container"></div>
            
            <h2><i class="fa-solid fa-file-import"></i> إدارة المحاضرات</h2>
            
            <div class="form-section">
                <h3>إضافة محاضرة جديدة</h3>
                <form id="add-lecture-form" data-context="lectures">
                    <div class="filter-form">
                        <div class="form-group">
                            <label for="division">الشعبة:</label>
                            <select id="division" name="division_id" required>
                                <option value="">-- اختر --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="offering">المقرر المتاح:</label>
                            <select id="offering" name="offering_id" required disabled>
                                <option value="">-- اختر شعبة أولاً --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="subject">المادة:</label>
                            <select id="subject" name="offering_subject_id" required disabled>
                                <option value="">-- اختر مقرر أولاً --</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="title">عنوان المحاضرة:</label>
                        <input type="text" id="title" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="description">الوصف (اختياري):</label>
                        <textarea name="description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="lecture_file">ملف المحاضرة:</label>
                        <input type="file" id="lecture_file" name="lecture_file" required>
                    </div>
                    <button type="submit"><i class="fa-solid fa-plus"></i> إضافة المحاضرة</button>
                    <p id="form-message" style="margin-top: 10px;"></p>
                </form>
            </div>

            <div class="table-section">
                <h3>المحاضرات الحالية</h3>
                
                <div id="lectures-list-container">
                    <p id="loading-message">جاري تحميل المحاضرات...</p>
                    <p id="no-lectures-message" style="display: none;">لا توجد محاضرات حالياً.</p>
                    
                    </div>
            </div>
        </main>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script src="../../assets/js/supabase-client.js"></script> 
    <script src="../js/load_components.js"></script>
    
    <script src="js/lectures_page.js"></script>
</body>
</html>